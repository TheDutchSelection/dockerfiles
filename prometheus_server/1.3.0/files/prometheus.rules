ALERT NodeDown
  IF up == 0
  FOR 1m
  LABELS { severity="page" }
  ANNOTATIONS {
    summary = "Node {{$labels.node}} down",
    description = "{{$labels.node}} has been down for more than 1 minute."
  }

ALERT NodeLowMemory
  IF(node_memory_MemAvailable / node_memory_MemTotal * 100) < 5
  FOR 2m
  LABELS { severity="page" }
  ANNOTATIONS {
    summary = "Node {{$labels.node}} memory low",
    description = "{{$labels.node}} has less than 5% memory available for more than 2 minutes."
  }

ALERT NodeLowDisk
  IF (node_filesystem_free{filesystem="/"} / node_filesystem_size{filesystem="/"} * 100) < 10
  FOR 2m
  LABELS { severity="page" }
  ANNOTATIONS {
    summary = "Node {{$labels.node}} disk space low",
    description = "{{$labels.node}} has less than 10% free disk space available for more than 2 minutes."
  }

ALERT HighLoad
  IF node_load1 > 20
  FOR 1m
  LABELS { severity="page" }
  ANNOTATIONS {
    summary = "Node {{$labels.node}} high load",
    description = "{{$labels.node}} has a load of over 20 for more than 2 minutes."
  }

ALERT EndpointUnavailable
  IF probe_success == 0
  FOR 2m
  LABELS { severity="page" }
  ANNOTATIONS {
    summary = "Endpoint {{$labels.target_name}} unavailable",
    description = "Endpoint {{$labels.target_name}} has been unavailable for more than 2 minutes."
  }
